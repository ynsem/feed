import{j as n,a as d,F as h,R as F}from"./index-84ee3536.js";import{f as G,C as f,a as v,A as w,b as T}from"./constants-a7e79a7d.js";import{y as k}from"./index.esm-c62344d9.js";import{e as M,B as z,n as H,G as c,o as O,p as u,q as C,f as L,L as y,r as m,S as U}from"./vendor-3c2e7aba.js";import{n as E,c as W}from"./index-2bd8f759.js";const q=()=>{const t=M();return n(z,{leftIcon:n(k,{}),variant:"outline",onClick:()=>{t(-1)},compact:!0,uppercase:!0,children:"Return"})},{gaps:D}=W,N=E.li`
  list-style: none;

  :not(:last-child) {
    margin-bottom: ${D.md};
  }
`,Q=({createdAt:t,avatar:e,author:r,text:s})=>n(N,{children:d(H,{p:"sm",radius:"md",withBorder:!0,children:[d(c,{position:"apart",mt:"xs",mb:"xs",align:"top",children:[n(O,{size:"md",src:e,alt:"avatar"}),n(u,{c:"blue",children:r})]}),n(c,{position:"apart",mt:"xs",mb:"xs",children:n(u,{size:"sm",children:s})}),n(c,{position:"apart",mt:"xs",mb:"xs",children:n(u,{children:G(t)})})]})}),J=async t=>{const{data:e}=await v.get(`${w}/news/${t}/comments`);return e},K=t=>{const{data:e,isError:r,isLoading:s}=C(["getComments"],()=>J(t),{enabled:!!t,cacheTime:f});return{data:e,isError:r,isLoading:s}},V=E.ul`
  margin: 0;
	padding: 0;
`,X=({id:t})=>{const{data:e,isLoading:r,isError:s}=K(t);return n(V,{children:r?n(L,{children:n(y,{})}):n(h,{children:e==null?void 0:e.map(a=>n(Q,{...a},a.id))})})};function l(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function p(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var x=typeof window<"u",g=function(t){var e=window.history,r=e[t];e[t]=function(s){var a=r.apply(this,arguments),o=new Event(t.toLowerCase());return o.state=s,window.dispatchEvent(o),a}};x&&(g("pushState"),g("replaceState"));var Y=function(){return{trigger:"load",length:1}},i=function(t){var e=window.history,r=e.state,s=e.length,a=window.location,o=a.hash,A=a.host,S=a.hostname,$=a.href,B=a.origin,R=a.pathname,I=a.port,P=a.protocol,b=a.search;return{trigger:t,state:r,length:s,hash:o,host:A,hostname:S,href:$,origin:B,pathname:R,port:I,protocol:P,search:b}},Z=function(){var t=m.useState(i("load")),e=t[0],r=t[1];return m.useEffect(function(){var s=function(){return r(i("popstate"))},a=function(){return r(i("pushstate"))},o=function(){return r(i("replacestate"))};return l(window,"popstate",s),l(window,"pushstate",a),l(window,"replacestate",o),function(){p(window,"popstate",s),p(window,"pushstate",a),p(window,"replacestate",o)}},[]),e},_=typeof Event=="function";const j=x&&_?Z:Y,tt=()=>{const{pathname:t}=j(),[,e]=(t==null?void 0:t.split(`${F.Feed}/`))??[,];return e},et=async t=>{const{data:e}=await v.get(`${w}/news/${t}`);return e},rt=t=>{const{data:e,isError:r,isLoading:s}=C(["getArticle"],()=>et(t),{enabled:!!t,cacheTime:f});return{data:e,isError:r,isLoading:s}},nt=()=>{const t=tt(),{data:e,isError:r,isLoading:s}=rt(t);return n(h,{children:s?n(L,{children:n(y,{})}):d(h,{children:[n(q,{}),n(T,{...e}),n(U,{h:"md"}),n(X,{id:e==null?void 0:e.id})]})})},ut=nt;export{ut as default};
